{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgInfo => {\n  return `\n    <li class=\"gallery-card\">\n        <a class = \"js-gallery-link\" href = \"${imgInfo.largeImageURL}\"> <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\"/></a>\n        <div class=\"stats-container\">\n            <ul class=\"stats-list\">\n                <li class=\"gallery-item\">\n                    <span class=\"label\">Likes</span>\n                    <span class=\"value\">${imgInfo.likes}</span>\n                </li>\n                <li class=\"gallery-item\">\n                    <span class=\"label\">Views</span>\n                    <span class=\"value\">${imgInfo.views}</span>\n                </li>\n                <li class=\"gallery-item\">\n                    <span class=\"label\">Comments</span>\n                    <span class=\"value\">${imgInfo.comments}</span>\n                </li>\n                <li class=\"gallery-item\">\n                    <span class=\"label\">Downloads</span>\n                    <span class=\"value\">${imgInfo.downloads}</span>\n                </li>\n            </ul>\n        </div>\n    </li>`\n};","export const fetchPhotosByQuery = query => {\n\n    const fetchParams = new URLSearchParams(\n        {\n            key: '53227460-8ffef261ea458fd0efa7b626a',\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n        }\n    );\n    return  fetch(`https://pixabay.com/api/?${fetchParams}`)\n        .then (response => {\n            if (!response.ok) {\n                throw new Error(response.status);\n            }\n            return response.json();\n        })\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { createGalleryCardTemplate } from './js/render-functions'; \nimport {fetchPhotosByQuery} from \"./js/pixabay-api\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightboxInstance = null;\n\nconst initLightbox = () => {\n    // If the instance hasn't been created yet (first time loading gallery), create it.\n    if (!lightboxInstance) {\n        lightboxInstance = new SimpleLightbox('.js-gallery a', {\n            captionDelay: 250, // Delay in milliseconds before the caption appears.\n            captionsData: 'alt', // Specify to use the 'alt' attribute of the image for the caption text.\n        });\n    } else {\n        // If the instance already exists, refresh it to include any newly added images in the gallery.\n        lightboxInstance.refresh();\n    }\n}\n\n// Form elements references. Grouping DOM elements here makes them easy to access and manage.\nconst refs = {\n    searchForm: document.querySelector('.js-search-form'), // Reference to the main search form element.\n    gallery: document.querySelector('.js-gallery'), // Reference to the container where gallery cards are rendered.\n    loader: document.querySelector('.js-loader'),\n}\n\n// Handler function executed when the search form is submitted.\nconst onSearchFormSubmit = event => {\n    event.preventDefault(); // Prevent the default form submission and page reload.\n\n    const {target : searchForm} = event;\n\n    const searchedQuery = searchForm.elements.user_query.value.trim()\n\n    if (searchedQuery.length === 0) {\n        \n            // Display an error notification using iziToast if the query is empty.\n            iziToast.show({\n            title: \"WARNING\",\n            message: `Search query cannot be empty!`,\n            color: 'red',\n            position: 'topCenter',\n\n        });\n\n        return; // Stop the function execution if the query is empty.\n    }\n    refs.gallery.innerHTML = '';\n\n    refs.loader.classList.add('is-active')\n    \n    // Call the API function to fetch photos based on the user's query.\n    fetchPhotosByQuery(searchedQuery)\n    .then(data => {\n        if (data.hits.length === 0){\n            // Display a notification if no images were found for the query.\n            iziToast.show({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                color: 'red',\n                position: 'topCenter',\n            });\n\n            return;\n        }\n\n        const galleryCardTemplate = data.hits.map(pictureInfo => createGalleryCardTemplate(pictureInfo)).join('')\n        \n        // Insert the generated HTML string of gallery cards into the gallery container.\n        refs.gallery.innerHTML = galleryCardTemplate\n        \n        // Initialize or refresh the SimpleLightbox to include the newly rendered images.\n        initLightbox();\n    })\n    // Handle any errors that occur during the fetch process (e.g., network error).\n    .catch(err => {\n        console.log(err);\n    })\n    .finally(() => {\n        refs.loader.classList.remove('is-active');\n    })\n}\n\n// Attach the event listener to the search form to trigger the submission handler.\nrefs.searchForm.addEventListener('submit', onSearchFormSubmit)"],"names":["createGalleryCardTemplate","imgInfo","fetchPhotosByQuery","query","fetchParams","response","lightboxInstance","initLightbox","SimpleLightbox","refs","onSearchFormSubmit","event","searchForm","searchedQuery","iziToast","data","galleryCardTemplate","pictureInfo","err"],"mappings":"iyBAAO,MAAMA,EAA4BC,GAChC;AAAA;AAAA,+CAEsCA,EAAQ,aAAa,oCAAoCA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,0CAKxGA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,0CAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,0CAIbA,EAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA,0CAIhBA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA,WCpB9CC,EAAqBC,GAAS,CAEvC,MAAMC,EAAc,IAAI,gBACpB,CACI,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACf,CACT,EACI,OAAQ,MAAM,4BAA4BC,CAAW,EAAE,EAClD,KAAMC,GAAY,CACf,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEnC,OAAOA,EAAS,MAC5B,CAAS,CACT,ECVA,IAAIC,EAAmB,KAEvB,MAAMC,EAAe,IAAM,CAElBD,EAODA,EAAiB,QAAO,EANxBA,EAAmB,IAAIE,EAAe,gBAAiB,CACnD,aAAc,IACd,aAAc,KAC1B,CAAS,CAKT,EAGMC,EAAO,CACT,WAAY,SAAS,cAAc,iBAAiB,EACpD,QAAS,SAAS,cAAc,aAAa,EAC7C,OAAQ,SAAS,cAAc,YAAY,CAC/C,EAGMC,EAAqBC,GAAS,CAChCA,EAAM,eAAc,EAEpB,KAAM,CAAC,OAASC,CAAU,EAAID,EAExBE,EAAgBD,EAAW,SAAS,WAAW,MAAM,KAAM,EAEjE,GAAIC,EAAc,SAAW,EAAG,CAGxBC,EAAS,KAAK,CACd,MAAO,UACP,QAAS,gCACT,MAAO,MACP,SAAU,WAEtB,CAAS,EAED,MACH,CACDL,EAAK,QAAQ,UAAY,GAEzBA,EAAK,OAAO,UAAU,IAAI,WAAW,EAGrCP,EAAmBW,CAAa,EAC/B,KAAKE,GAAQ,CACV,GAAIA,EAAK,KAAK,SAAW,EAAE,CAEvBD,EAAS,KAAK,CACV,QAAS,2EACT,MAAO,MACP,SAAU,WAC1B,CAAa,EAED,MACH,CAED,MAAME,EAAsBD,EAAK,KAAK,IAAIE,GAAejB,EAA0BiB,CAAW,CAAC,EAAE,KAAK,EAAE,EAGxGR,EAAK,QAAQ,UAAYO,EAGzBT,GACR,CAAK,EAEA,MAAMW,GAAO,CACV,QAAQ,IAAIA,CAAG,CACvB,CAAK,EACA,QAAQ,IAAM,CACXT,EAAK,OAAO,UAAU,OAAO,WAAW,CAChD,CAAK,CACL,EAGAA,EAAK,WAAW,iBAAiB,SAAUC,CAAkB"}